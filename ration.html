<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Comprehensive Smoking Craving & Rationalization Checker</title>
  <style>
    :root {
      --primary-color: #4a6fa5;
      --secondary-color: #166088;
      --accent-color: #4fc3f7;
      --light-color: #f8f9fa;
      --dark-color: #343a40;
      --success-color: #28a745;
      --warning-color: #ffc107;
    }
    body {
      background: #f5f5f5;
      color: #333;
      font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
      margin:0; padding:0;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 1rem 20px;
    }
    header {
      background: linear-gradient(135deg,var(--primary-color),var(--secondary-color));
      color:white; padding:1rem 0;
      box-shadow:0 2px 10px rgba(0,0,0,0.1);
      position: sticky; top: 0; z-index: 1000;
    }
    .navbar { display: flex; justify-content:space-between; align-items:center; }
    .logo { font-size:1.6rem; font-weight:bold; text-decoration:none; color:white; }
    .home-btn {
      padding:.5rem 1rem;
      background:rgba(255,255,255,0.2);
      color:white;
      text-decoration:none;
      border-radius:4px;
      transition:background .3s;
    }
    .home-btn:hover { background:rgba(255,255,255,0.3); }
    main {padding:2rem 0;}
    .section-title {
      text-align:center; margin-bottom:1.5rem;
      color:var(--primary-color); font-size:1.8rem;
    }
    .question, .scale-container, .response-section, .explanation-box, .situation-section {
      background:white; padding:1.5rem 2rem;
      border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.07);
      margin-bottom:1.5rem;
    }
    label {
      display:block;
      margin-bottom:0.5rem;
      font-weight:600;
    }
    select, input[type="radio"], input[type="checkbox"] {
      margin-right: 8px;
    }
    button {
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      transition: background 0.3s ease;
      margin-top: 1rem;
    }
    button:hover {
      background: var(--secondary-color);
    }
    .hidden { display: none; }
    ul { margin-top:12px; margin-bottom:0; padding-left:22px; }
    ul li { margin-bottom:10px; }
    .explanation-box h3 { margin-top:0; }
    .strategy-box h3 { margin-top:0; }
    .success { color: var(--success-color); font-weight: 600; }
    .info { color: var(--primary-color);}
    .warning { color: var(--warning-color);}
    .flex-vertical {display: flex; flex-direction: column;}
    .situation-label {margin-bottom:.2rem;}
    footer {
      background-color:var(--dark-color);
      color:white; text-align:center;
      padding:1.5rem 0; margin-top:3rem;
    }
    @media (max-width: 640px) {
      .question,.scale-container,.situation-section,.explanation-box,.strategy-box {padding: 1rem;}
      button {width:100%;}
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav class="navbar">
        <a href="#" class="logo">Smoking Craving & Rationalization Checker</a>
        <a href="index.html" class="home-btn">Back to Home</a>
      </nav>
    </div>
  </header>

  <main class="container">

    <section id="initial-questions" class="question">
      <h1 class="section-title">How Are You Feeling Right Now?</h1>
      <form id="cravingForm" autocomplete="off">
        <label for="feelingSelect">What do you feel right now?</label>
        <select id="feelingSelect" required>
          <option value="">-- Select your feeling --</option>
          <option value="calm">Calm, no urge to smoke</option>
          <option value="some_urge">Some urge but manageable</option>
          <option value="strong_urge">Strong urge to smoke</option>
          <option value="very_strong">Very strong urge, almost uncontrollable</option>
        </select>

        <label>Would you be smoking at this moment if you could?</label>
        <input type="radio" name="smokingNow" value="yes" id="smokingYes" required />
        <label for="smokingYes" style="display:inline">Yes</label>
        <input type="radio" name="smokingNow" value="no" id="smokingNo" />
        <label for="smokingNo" style="display:inline">No</label>

        <label for="walkDistance">How far would you be willing to walk to get a cigarette right now? (meters)</label>
        <select id="walkDistance" required>
          <option value="">-- Select distance --</option>
          <option value="0">0 m (would smoke immediately if given)</option>
          <option value="100">100 m</option>
          <option value="500">500 m</option>
          <option value="1000">1 km or more</option>
          <option value="any">Any amount of walking</option>
          <option value="-1">None at all (would not smoke under any cost)</option>
        </select>

        <button type="submit">Next</button>
      </form>
    </section>

    <section id="support-section" class="scale-container hidden">
      <div id="current-urge-flow">
        <h2 class="section-title">Understanding Your Impulse to Smoke</h2>

        <div id="resilient-message" class="response-section hidden success">
          Keep going! Your resolve is strong.
        </div>

        <div id="breathwork-message" class="response-section hidden info">
          Consider using breathwork and mindfulness exercises to help manage cravings and withdrawal.
        </div>

        <div id="rationalization-prompt" class="response-section hidden">
          <label for="reasonSelect" style="font-weight:500">Do you feel any reason that makes you want to smoke even though you know you shouldn't?</label>
          <select id="reasonSelect">
            <option value="">-- Select a reason --</option>
            <option value="stress">I'm stressed or anxious</option>
            <option value="boredom">I'm bored—want something to do</option>
            <option value="habit">It's just part of my routine</option>
            <option value="social">I'm with other smokers</option>
            <option value="reward">I deserve a reward/break</option>
            <option value="focus">It helps me concentrate</option>
            <option value="identity">It's part of my identity</option>
            <option value="weight">It keeps me thin</option>
            <option value="misery">Quitting will make me miserable</option>
            <option value="genes">It's in my genes/I'm doomed</option>
            <option value="damage">Damage is already done</option>
            <option value="rare">I only smoke sometimes/rarely</option>
            <option value="automaticity">I do it without thinking</option>
            <option value="mood">It stabilizes my mood</option>
          </select>
          <div id="explanation" class="explanation-box"></div>
        </div>

        <div id="last-question" class="response-section hidden" style="margin-top: 1.5rem;">
          <label>Do you still feel the urge to smoke and find it difficult to control withdrawal?</label>
          <input type="radio" name="urgeControl" value="yes" id="urgeYes" />
          <label for="urgeYes" style="display:inline">Yes, I find it difficult</label>
          <input type="radio" name="urgeControl" value="no" id="urgeNo" />
          <label for="urgeNo" style="display:inline">No, I feel able to control</label>
          <button id="finalizeBtn" style="display:block; margin-top:1rem;">Finish</button>
        </div>

        <div id="final-message" class="response-section hidden" style="font-weight: 600; margin-top: 1rem;"></div>
      </div>

      <div id="situational-flow" class="situation-section hidden">
        <h2 class="section-title">Where Do You Risk Smoking?</h2>
        <form id="situationalForm" class="flex-vertical">
          <label>Select situations where you might smoke, even without a current urge:</label>
          <label class="situation-label"><input type="checkbox" name="situation" value="stress"> When I'm stressed or anxious</label>
          <label class="situation-label"><input type="checkbox" name="situation" value="social"> When socializing or peer pressure</label>
          <label class="situation-label"><input type="checkbox" name="situation" value="routine"> As part of a routine (e.g., with coffee, break)</label>
          <label class="situation-label"><input type="checkbox" name="situation" value="boredom"> When bored or idle</label>
          <label class="situation-label"><input type="checkbox" name="situation" value="reward"> As a reward after finishing something</label>
          <label class="situation-label"><input type="checkbox" name="situation" value="focus"> When needing to concentrate or focus</label>
          <label class="situation-label"><input type="checkbox" name="situation" value="emotion"> When feeling down or emotional</label>
          <label class="situation-label"><input type="checkbox" name="situation" value="other"> Other situations</label>
          <button type="submit">Show Guidance</button>
        </form>
        <div id="situation-strategies" class="strategy-box"></div>
        <button id="resetBtn" style="display:none; margin-top:18px">Restart</button>
      </div>
    </section>

  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 Smoking Assessment Tools. Website by Kshiteesh Bhardwaj.</p>
    </div>
  </footer>

  <script>
    // Rationalization explanations & debunks
    const explanations = {
      stress: {
        title: "Stress Relief Rationalizations — The Comfort Illusion",
        text: `<ul>
          <li><strong>Perceived relief:</strong> Smoking feels like stress relief, but it only eases nicotine withdrawal. The calm is an illusion created by ending the discomfort of withdrawal.</li>
          <li><strong>Cognitive distortions:</strong> Emotional reasoning, catastrophizing, and discounting past successes.</li>
          <li><strong>Challenge:</strong> Use mindful breathing and a stress diary to distinguish true stress relief from nicotine relief.</li>
        </ul>`
      },
      boredom: {
        title: "Boredom & Stimulation Seeking — Filling the Psychological Void",
        text: `<ul>
          <li><strong>Mechanism:</strong> Smoking tricks your brain’s need for novelty and dopamine.</li>
          <li><strong>Action:</strong> Replace smoking with small engaging activities like a short walk or journaling.</li>
        </ul>`
      },
      habit: {
        title: "Automatic Habit Loops — The Invisible Pattern",
        text: `<ul>
          <li><strong>Core issue:</strong> Smoking is a learned motor sequence triggered by cues.</li>
          <li><strong>Intervention:</strong> Replace cues with alternative actions such as deep breathing.</li>
        </ul>`
      },
      social: {
        title: "Social Rationalization — Belonging Through Smoke",
        text: `<ul>
          <li><strong>Belief:</strong> Smoking connects you with others but true connection is possible without it.</li>
          <li><strong>Action:</strong> Cultivate new social rituals such as shared walks or water breaks.</li>
        </ul>`
      },
      reward: {
        title: "Reward Rationalization — Mistaking Withdrawal for Pleasure",
        text: `<ul>
          <li><strong>Perception:</strong> Smoking is mistaken as a reward, but it really relieves nicotine withdrawal.</li>
          <li><strong>Action:</strong> Redefine reward with positive activities like music or laughter.</li>
        </ul>`
      },
      focus: {
        title: "Concentration Rationalization — The Alertness Illusion",
        text: `<ul>
          <li><strong>Belief:</strong> Smoking feels like it helps focus, but it's just reversing withdrawal fog.</li>
          <li><strong>Action:</strong> Try hydration, movement, or mindful refocusing instead.</li>
        </ul>`
      },
      identity: {
        title: "Identity & Self-Narrative — 'I’m Just a Smoker'",
        text: `<ul>
          <li><strong>Belief:</strong> Smoking is part of your identity.</li>
          <li><strong>Reframe:</strong> You are a person who smokes temporarily, not defined by it.</li>
          <li><strong>Action:</strong> Explore new identity anchors beyond smoking.</li>
        </ul>`
      },
      weight: {
        title: "Weight Control Rationalization — The False Trade-off",
        text: `<ul>
          <li><strong>Belief:</strong> Smoking keeps you thin but at high health cost.</li>
          <li><strong>Action:</strong> Focus on mindful eating and positive body care instead.</li>
        </ul>`
      },
      misery: {
        title: "Quitting Misery Rationalization — Fear of Discomfort",
        text: `<ul>
          <li><strong>Belief:</strong> Quitting will be miserable, but discomfort peaks briefly.</li>
          <li><strong>Action:</strong> Track withdrawal and use CBT or mindfulness for relief.</li>
        </ul>`
      },
      genes: {
        title: "Genetic Fatalism — The Destiny Delusion",
        text: `<ul>
          <li><strong>Belief:</strong> Genes doom you, but environment and choices matter most.</li>
          <li><strong>Action:</strong> Reclaim control with routines and social support.</li>
        </ul>`
      },
      damage: {
        title: "‘Damage Done’ Rationalization — The Hopelessness Trap",
        text: `<ul>
          <li><strong>Belief:</strong> It’s too late to repair damage.</li>
          <li><strong>Truth:</strong> Healing starts immediately after quitting with measurable benefits.</li>
        </ul>`
      },
      rare: {
        title: "‘Occasional Smoker’ Rationalization — The Myth of Control",
        text: `<ul>
          <li><strong>Belief:</strong> Smoking socially is harmless.</li>
          <li><strong>Reality:</strong> Occasional use maintains addiction and dependency sensitivity.</li>
        </ul>`
      },
      automaticity: {
        title: "Automatic Smoking — The Mindless Habit Loop",
        text: `<ul>
          <li><strong>Mechanism:</strong> Smoking is an unconscious habit triggered by context.</li>
          <li><strong>Action:</strong> Use mindfulness to bring awareness and break autopilot behavior.</li>
        </ul>`
      },
      mood: {
        title: "Mood Regulation Rationalization — Borrowed Stability",
        text: `<ul>
          <li><strong>Belief:</strong> Smoking stabilizes mood but causes a cycle of crash and lift.</li>
          <li><strong>Action:</strong> Stabilize mood naturally with sleep, exercise, and connection.</li>
        </ul>`
      }
    };

    // Strategies and debunks for common situations (for 'no urge' but situation-based risk)
    const situationStrategies = {
      stress: {
        title: "Stressed or Anxious",
        debunk: "Smoking does not provide genuine stress relief. It merely reduces withdrawal discomfort. True calm can be created with healthier practices.",
        strategies: [
          "Try mindful breathing (ex: inhale, exhale slowly for a count of 4, repeat).",
          "Write down your stress triggers and make a practical coping plan.",
          "Physical activity (even a brisk walk) helps lower stress chemicals in your brain."
        ]
      },
      social: {
        title: "Socializing or Peer Pressure",
        debunk: "The real connection with people is not dependent on smoking. Many find increased self-respect and admiration from declining a cigarette.",
        strategies: [
          "Imagine handling a social offer with a polite but firm 'No thanks, I don't smoke now.'",
          "Hold a drink, snack, or pen for hand comfort.",
          "Make plans to meet in smoke-free venues or at activities that don’t center around smoking."
        ]
      },
      routine: {
        title: "Routine (Coffee/Breaks)",
        debunk: "Routine-linked cravings are a conditioned response, not genuine need.",
        strategies: [
          "Change your routine slightly—take your break in a new place.",
          "Pair coffee with a healthy snack or water instead.",
          "Make a brief phone call or do a brain teaser during your break."
        ]
      },
      boredom: {
        title: "Boredom or Idle Times",
        debunk: "Boredom triggers urge because the brain seeks stimulation. Smoking isn’t needed for that.",
        strategies: [
          "List small tasks you can do when bored (puzzle, journaling, music).",
          "Keep your hands busy with objects (stress ball, doodling).",
          "Get up for a short stretch or change scenery."
        ]
      },
      reward: {
        title: "As a Reward",
        debunk: "Nicotine withdrawal tricks the brain into thinking smoking is a treat. Real rewards bring joy, not dependency.",
        strategies: [
          "Celebrate wins with good music, a special snack, or sharing your success with someone.",
          "Recognize the urge, label it, let it pass.",
          "Make a list of healthy rewards for yourself."
        ]
      },
      focus: {
        title: "When Needing to Focus",
        debunk: "The alertness from smoking is only a withdrawal effect stopping. True focus is better with sleep, hydration, and movement.",
        strategies: [
          "Stand, stretch, and drink water.",
          "Break your task into 10-minute chunks.",
          "Try alternate focus tricks like chewing gum or using a focus playlist."
        ]
      },
      emotion: {
        title: "Low or Emotional Times",
        debunk: "Smoking lifts mood briefly but crash soon follows. Consistent routines are better for mood stability.",
        strategies: [
          "Reach out to a friend or loved one when you feel low.",
          "Practice gentle self-talk and patience.",
          "Do an easy, enjoyable activity."
        ]
      },
      other: {
        title: "Other Situations",
        debunk: "Almost any trigger can be met with a solution healthier than smoking.",
        strategies: [
          "Pause to recognize any trigger, and try a slow breath or small distraction.",
          "Remind yourself of your progress.",
          "Seek creative, positive alternatives to address the moment."
        ]
      }
    };

    // UI selectors
    const form = document.getElementById('cravingForm');
    const supportSection = document.getElementById('support-section');
    const currentUrgeFlow = document.getElementById('current-urge-flow');
    const resilientMsg = document.getElementById('resilient-message');
    const breathworkMsg = document.getElementById('breathwork-message');
    const rationalizationPrompt = document.getElementById('rationalization-prompt');
    const explanationBox = document.getElementById('explanation');
    const lastQuestion = document.getElementById('last-question');
    const finalMsg = document.getElementById('final-message');
    const reasonSelect = document.getElementById('reasonSelect');
    const finalizeBtn = document.getElementById('finalizeBtn');
    const situationalFlow = document.getElementById('situational-flow');
    const situationalForm = document.getElementById('situationalForm');
    const situationStrategiesBox = document.getElementById('situation-strategies');
    const resetBtn = document.getElementById('resetBtn');

    // Main decision point after form submit
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const feeling = document.getElementById('feelingSelect').value;
      const smokingNow = document.querySelector('input[name="smokingNow"]:checked')?.value;
      const walkDistance = document.getElementById('walkDistance').value;

      // Hide form, show support logic
      form.classList.add('hidden');
      supportSection.classList.remove('hidden');

      // Track 1: No urge to smoke and unwilling to walk ('resilient')
      if (walkDistance === '-1' || (smokingNow === 'no' && walkDistance === '-1')) {
        currentUrgeFlow.classList.remove('hidden');
        situationalFlow.classList.add('hidden');
        resilientMsg.classList.remove('hidden');
        breathworkMsg.classList.add('hidden');
        rationalizationPrompt.classList.add('hidden');
        lastQuestion.classList.add('hidden');
        finalMsg.textContent = 'Keep up the strong resistance!';
        finalMsg.classList.remove('hidden');
      } 
      // Track 1: Current craving, answer rationalization/withdrawal
      else if (walkDistance === '0' || walkDistance === '100' || walkDistance === '500' || walkDistance === '1000' || walkDistance === 'any') {
        currentUrgeFlow.classList.remove('hidden');
        situationalFlow.classList.add('hidden');
        resilientMsg.classList.add('hidden');
        rationalizationPrompt.classList.remove('hidden');
        breathworkMsg.classList.add('hidden');
        lastQuestion.classList.remove('hidden');
        finalMsg.classList.add('hidden');
      } 
      // Track 2: No current urge but situational risk
      else if (feeling === "calm") {
        currentUrgeFlow.classList.add('hidden');
        situationalFlow.classList.remove('hidden');
        situationStrategiesBox.innerHTML = '';
        resetBtn.style.display = "none";
      }
      // Unhandled fallback (ambivalent)
      else {
        currentUrgeFlow.classList.remove('hidden');
        situationalFlow.classList.add('hidden');
        resilientMsg.classList.add('hidden');
        breathworkMsg.classList.remove('hidden');
        rationalizationPrompt.classList.add('hidden');
        lastQuestion.classList.add('hidden');
        finalMsg.classList.add('hidden');
      }
    });

    // Rationalization: show selected reason's explanation
    reasonSelect.addEventListener('change', () => {
      const choice = reasonSelect.value;
      if (!choice) {
        explanationBox.style.display = 'none';
        explanationBox.innerHTML = '';
        return;
      }
      const { title, text } = explanations[choice];
      explanationBox.innerHTML = `<h3>${title}</h3>${text}`;
      explanationBox.style.display = 'block';
    });

    // Finalize current urge flow
    finalizeBtn.addEventListener('click', () => {
      const urgeControl = document.querySelector('input[name="urgeControl"]:checked')?.value;
      if (urgeControl === 'yes') {
        finalMsg.textContent = "Since you still feel strong urges, try breathwork and mindfulness techniques to manage withdrawal and cravings effectively.";
        breathworkMsg.classList.remove('hidden');
      } else if (urgeControl === 'no') {
        finalMsg.textContent = "Great! Your ability to control cravings is an important strength. Keep using your strategies to stay smoke-free.";
        breathworkMsg.classList.add('hidden');
      } else {
        finalMsg.textContent = "Please select if you find it difficult to control urges or not.";
        return;
      }
      finalMsg.classList.remove('hidden');
      lastQuestion.classList.add('hidden');
      rationalizationPrompt.classList.add('hidden');
    });

    // Situational triggers path
    situationalForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const situations = Array.from(document.querySelectorAll('input[name="situation"]:checked'))
        .map(cb => cb.value);
      situationStrategiesBox.innerHTML = '';
      if (!situations.length) {
        situationStrategiesBox.innerHTML = `<div class="warning">Please select at least one situation to receive personalized guidance.</div>`;
        return;
      }
      let html = '';
      situations.forEach(s => {
        const strat = situationStrategies[s] || situationStrategies['other'];
        html += `<div style="margin-bottom:1.5rem"><h3>${strat.title}</h3>
        <div><strong>Debunk:</strong> ${strat.debunk}</div>
        <ul>${strat.strategies.map(st => `<li>${st}</li>`).join('')}</ul></div>`;
      });
      // Add general message of encouragement
      html += `<div class="success">Each time you avoid smoking in a risky situation you build long-term freedom and confidence. You're learning new, healthier habits!</div>`;
      situationStrategiesBox.innerHTML = html;
      resetBtn.style.display = "block";
    });

    resetBtn.addEventListener('click', () => {
      // Reset everything to initial state
      document.getElementById('cravingForm').reset();
      Array.from(document.querySelectorAll('input[name="situation"]')).forEach(cb => cb.checked = false);
      situationStrategiesBox.innerHTML = '';
      reasonSelect.value = "";
      explanationBox.innerHTML = "";
      finalMsg.textContent = "";
      resilientMsg.classList.add('hidden');
      breathworkMsg.classList.add('hidden');
      rationalizationPrompt.classList.add('hidden');
      lastQuestion.classList.add('hidden');
      finalMsg.classList.add('hidden');
      supportSection.classList.add('hidden');
      currentUrgeFlow.classList.remove('hidden');
      situationalFlow.classList.add('hidden');
      form.classList.remove('hidden');
      resetBtn.style.display = "none";
    });

  </script>
</body>
</html>
